<!--
    Auto-generated test-site
-->
<html>
<head>
<title>test page for object fbcontrol</title>
</head>
    <script type="text/javascript">
        function plugin0()
        {
            return document.getElementById('plugin0');
        }
        plugin = plugin0;
        function addEvent(obj, name, func)
        {
            if (window.addEventListener) {
                obj.addEventListener(name, func, false); 
            } else {
                obj.attachEvent("on"+name, func);
            }
        }
        
        function load()
        {
            addEvent(plugin(), 'fired', function(x){
                alert('onfired() from load(): '+x)
            });
        }
        
        function pluginLoaded() {
            //alert("Plugin loaded!");
            console.log('Plugin loaded');
            
            device_count = plugin().initDevices();
            if (device_count > 0) {
              window.plugin_socket = device_count - 1;
              
              console.log("Device firmware : " + plugin().getFirmwareRevision(window.plugin_socket));
              console.log("Device serial : " + plugin().getSerialNumber(window.plugin_socket));
            } else {
              console.log('No devices found!');
            }
            
            
        }
        
        function addTestEvent()
        {
            addEvent(plugin(), 'fired', function(x){
                alert('onfired(): '+x)
            });
        }
        
        function testEvent()
        {
            plugin().testEvent('test stuff');
        }
        
        function pluginValid()
        {
            alert(plugin().valid);
        }
    </script>
<body onload="load()">
<object id="plugin0" type="application/x-conceptpmcommunicator" width="300" height="300">
    <param name="onload" value="pluginLoaded" />
</object><br />
<a href="#" onclick="javascript:addTestEvent()">set event handler</a> <br />
<a href="#" onclick="javascript:testEvent()">Fire event</a> <br />
<a href="#" onclick="javascript:pluginValid()">alert plugin valid</a> <br />
</body>
</html>
